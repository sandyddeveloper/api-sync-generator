// Auto-generated by api-sync-generator
// Do not edit directly
{% if config.hooks_mode == "react_query" %}
import { useQuery, useMutation } from '@tanstack/react-query';
{% else %}
import { useState, useCallback } from 'react';
{% endif %}
import * as Api from './api';
import type * as Types from './types';

{% for endpoint in endpoints %}
{% set is_mutation = endpoint.method in ['POST', 'PUT', 'PATCH', 'DELETE'] %}
{% set hook_name = 'use' ~ endpoint.operation_id[0]|upper ~ endpoint.operation_id[1:] %}
{% set has_params = endpoint.url_params | length > 0 or endpoint.query_params | length > 0 or endpoint.request_body_type %}

/**
 * Hook for: {{ endpoint.method }} {{ endpoint.path }}
{% if endpoint.summary %} * Summary: {{ endpoint.summary }}
{% endif %}{% if endpoint.description %} * Description: {{ endpoint.description }}
{% endif %} */
{% if config.hooks_mode == "react_query" %}
{% if is_mutation %}
export function {{ hook_name }}() {
  return useMutation({
    mutationFn: (
      {% if has_params %}params: Parameters<typeof Api.{{ endpoint.operation_id }}>[0]{% endif %}
    ) => Api.{{ endpoint.operation_id }}({% if has_params %}params{% endif %}),
  });
}
{% else %}
export function {{ hook_name }}(
  {% if has_params %}params: Parameters<typeof Api.{{ endpoint.operation_id }}>[0]{% endif %}
) {
  return useQuery({
    queryKey: ['{{ endpoint.operation_id }}', {% if has_params %}params{% endif %}],
    queryFn: () => Api.{{ endpoint.operation_id }}({% if has_params %}params{% endif %}),
  });
}
{% endif %}

{% else %}
export function {{ hook_name }}() {
  const [data, setData] = useState<{{ 'Types.' ~ endpoint.response_body_type if endpoint.response_body_type else 'void' }} | null>(null);
  const [error, setError] = useState<Error | null>(null);
  const [isLoading, setIsLoading] = useState(false);

  const execute = useCallback(async (
    {% if has_params %}
    params: Parameters<typeof Api.{{ endpoint.operation_id }}>[0]
    {% endif %}
  ) => {
    setIsLoading(true);
    setError(null);
    try {
      const result = await Api.{{ endpoint.operation_id }}({% if has_params %}params{% endif %});
      setData(result);
      return result;
    } catch (err) {
      setError(err instanceof Error ? err : new Error('Unknown error'));
      throw err;
    } finally {
      setIsLoading(false);
    }
  }, []);

  return {
    execute,
    data,
    error,
    isLoading,
  };
}
{% endif %}
{% endfor %}
